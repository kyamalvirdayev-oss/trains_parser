# Парсер расписания электричек (Москва Ярославская)

Учебный проект для практики парсинга HTML с помощью библиотеки **BeautifulSoup**.

Скрипт `parse_sputnik.py` читает сохранённую HTML-страницу расписания электричек
для станции **Москва Ярославская** с сайта [tutu.ru](https://www.tutu.ru/station.php?nnst=45807)
и извлекает данные о рейсах.

## Что делает программа

Для каждого рейса из расписания скрипт извлекает:

- **время отправления**;
- **маршрут** в формате `Откуда → Куда` (например, `Москва Ярославская → Сергиев Посад`);
- пометку **дней следования** (например, `Ежедневно`, `Будни`, список дней недели).

Реализована фильтрация по типу дней:

- `будни` — выводятся только рейсы, отмеченные как идущие по рабочим дням;
- `ежедневно` — только рейсы с пометкой «Ежедневно»;
- `all` — показать все рейсы (значение по умолчанию).

Результат по умолчанию выводится в консоль, **по одной строке на рейс**.
Дополнительно данные можно сохранить в JSON-файл.

## Подготовка HTML-файла

1. Откройте страницу расписания в браузере:  
   `https://www.tutu.ru/station.php?nnst=45807`
2. В браузере выберите **Файл → Сохранить как…**.
3. Сохраните страницу целиком (обычно вариант «Веб-страница, полностью»)
   под именем, например, `tutu_moscow_yaroslavskaya.html`.
4. Поместите сохранённый файл в корень этого репозитория (рядом с `parse_sputnik.py`).

Именно этот локальный HTML-файл будет использоваться парсером.
Скрипт **не обращается в интернет**, поэтому изменения на сайте tutu.ru
не повлияют на результаты, пока структура сохранённой страницы остаётся прежней.

## Установка и запуск

Рекомендуется использовать виртуальное окружение.

```bash
# Создать виртуальное окружение
python -m venv venv

# Активировать (Linux / macOS)
source venv/bin/activate

# Активировать (Windows)
venv\Scripts\activate
```

Установите зависимости:

```bash
pip install -r requirements.txt
```

Базовый запуск (все рейсы):

```bash
python parse_sputnik.py tutu_moscow_yaroslavskaya.html
```

Фильтрация только по будням:

```bash
python parse_sputnik.py tutu_moscow_yaroslavskaya.html --days будни
```

Фильтрация только ежедневных рейсов и сохранение результата в JSON:

```bash
python parse_sputnik.py tutu_moscow_yaroslavskaya.html --days ежедневно --json trains_daily.json
```

## Пример вывода

Пример строки в консоли (формат может немного отличаться от вашего HTML):

```text
08:45  Москва Ярославская → Болшево  (Будни)
08:48  Москва Ярославская → Фрязино Пасс.  (Ежедневно)
09:00  Москва Ярославская → Монино  (Ежедневно)
...
```

Если указан аргумент `--json`, то в указанный файл будет сохранён
список словарей следующего вида:

```json
[
  {
    "departure": "08:45",
    "route_from": "Москва Ярославская",
    "route_to": "Болшево",
    "days_raw": "Будни",
    "route": "Москва Ярославская → Болшево"
  }
]
```

## Структура репозитория

- `parse_sputnik.py` — основной скрипт парсера.
- `README.md` — описание проекта, инструкция по запуску и пример вывода.
- `requirements.txt` — список используемых библиотек (для установки через `pip`).
- `.gitignore` — исключает виртуальное окружение, кэш Python и временные файлы.

## Ограничения и замечания

- Парсер привязан к структуре текстового блока расписания на странице tutu.ru.
  Если в будущем разметка страницы сильно изменится, может потребоваться
  обновить регулярные выражения в `parse_sputnik.py`.
- Скрипт ориентирован на станцию отправления **Москва Ярославская** и
  извлекает маршруты вида `Москва Ярославская — ...`.
- Проект предназначен для учебных целей и демонстрации работы с BeautifulSoup.
